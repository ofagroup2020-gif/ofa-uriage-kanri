<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>OFA æ‹ ç‚¹LP / æ‹ ç‚¹ä¸€è¦§</title>

  <style>
    :root{
      --bg:#ffffff;--card:#ffffff;--border:#dddddd;--text:#111111;--muted:#666666;
      --yellow:#FFD400;--black:#111111;--red:#E60012;--green:#0FA958;--blue:#0066CC;
      --radius:12px;
    }
    *{box-sizing:border-box}
    body{margin:0;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Noto Sans JP","Hiragino Kaku Gothic ProN","Yu Gothic",sans-serif;background:var(--bg);color:var(--text)}
    .wrap{max-width:1200px;margin:0 auto;padding:16px 14px 90px}
    .topbar{
      background:#fff;border-bottom:2px solid var(--black);
      padding:12px 10px;margin:-16px -14px 14px;
      display:flex;gap:10px;align-items:center;justify-content:space-between;flex-wrap:wrap
    }
    .brand{display:flex;gap:10px;align-items:center}
    .logo{width:44px;height:44px;border-radius:12px;background:var(--yellow);border:2px solid var(--black);display:grid;place-items:center;font-weight:900;color:#000}
    .brand h1{margin:0;font-size:16px;font-weight:900}
    .brand .sub{margin-top:2px;color:var(--muted);font-size:12px;font-weight:700}

    .card{background:var(--card);border:2px solid var(--black);border-radius:var(--radius);padding:14px;margin-bottom:14px}
    .muted{color:var(--muted);font-size:12px;line-height:1.6}

    .btn{
      display:inline-flex;align-items:center;gap:8px;justify-content:center;
      padding:10px 14px;border-radius:10px;border:2px solid var(--black);
      background:#f5f5f5;color:#111;text-decoration:none;font-weight:900;cursor:pointer;
    }
    .btn:hover{opacity:.9}
    .btn-yellow{background:var(--yellow);color:#000}
    .btn-green{background:var(--green);color:#fff;border-color:#0b6f3d}
    .btn-blue{background:var(--blue);color:#fff;border-color:#003e7a}
    .btn-red{background:var(--red);color:#fff;border-color:#8f000b}

    .row{display:grid;gap:12px}
    @media(min-width:980px){.row.cols2{grid-template-columns:1fr 1fr}}

    .pill{display:inline-flex;gap:8px;align-items:center;padding:8px 10px;border-radius:999px;border:1px solid var(--border);background:#fafafa;font-size:12px;font-weight:900}
    .gridMap{display:grid;gap:10px;grid-template-columns:repeat(4,1fr)}
    @media(max-width:980px){.gridMap{grid-template-columns:repeat(2,1fr)}}
    @media(max-width:520px){.gridMap{grid-template-columns:1fr}}
    .region{border:1px solid var(--border);border-radius:12px;padding:10px;background:#fff}
    .region h2{margin:0 0 8px;font-size:13px;font-weight:900}
    .chips{display:flex;gap:8px;flex-wrap:wrap}
    .chip{
      display:inline-flex;align-items:center;
      padding:8px 10px;border-radius:999px;
      border:1px solid var(--border);
      background:#fff;
      color:#111;text-decoration:none;font-weight:900;font-size:12px
    }
    .chip:hover{background:#f8f8f8}

    .qrWrap{display:grid;place-items:center;border:2px dashed #999;border-radius:12px;padding:12px;background:#fff}
    #qrcode{background:#fff;padding:8px;border:1px solid #ddd;border-radius:10px}
    input{width:100%;padding:10px;border-radius:10px;border:1px solid var(--border);font-size:14px}
    code{background:#f3f3f3;border:1px solid #ddd;padding:2px 6px;border-radius:8px}
  </style>
</head>

<body>
  <div class="wrap">

    <div class="topbar">
      <div class="brand">
        <div class="logo">OFA</div>
        <div>
          <h1 id="headerTitle">æ‹ ç‚¹ä¸€è¦§ï¼ˆå…¨å›½ãƒãƒƒãƒ—é¢¨ï¼‰</h1>
          <div class="sub" id="headerSub">æ‹ ç‚¹LPï¼ˆQRå…¥å£ï¼‰ã‚’ä½œã£ã¦ã€æœˆæ¬¡å…¥åŠ›ã¸èª˜å°</div>
        </div>
      </div>
      <div style="display:flex;gap:8px;flex-wrap:wrap">
        <a class="btn btn-blue" href="viewer.html" target="_blank">ğŸ“Š æœ¬éƒ¨ãƒ“ãƒ¥ãƒ¼</a>
        <a class="btn btn-green" href="https://lin.ee/o1TPv8v" target="_blank">ğŸ“© LINEï¼ˆæœˆæ¬¡å ±å‘Šï¼‰</a>
        <a class="btn btn-yellow" href="index.html" target="_blank">ğŸ“ æœˆæ¬¡å…¥åŠ›</a>
      </div>
    </div>

    <!-- ===== ä¸€è¦§ãƒ¢ãƒ¼ãƒ‰ ===== -->
    <div id="modeList">
      <div class="card">
        <div class="muted">
          âœ… æ‹ ç‚¹ã‚’ã‚¯ãƒªãƒƒã‚¯ â†’ æ‹ ç‚¹LPï¼ˆQRï¼‰ã¸ã€‚<br>
          â€»æ‹ ç‚¹è¿½åŠ ã¯ã€ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«å†…ã® <b>BASES</b> ã«1è¡Œè¿½åŠ ã§OKã€‚
        </div>
        <div style="margin-top:12px;display:flex;gap:10px;flex-wrap:wrap;align-items:center">
          <div class="pill">æ¤œç´¢</div>
          <input id="q" placeholder="ä¾‹ï¼šç¦å²¡ / é¹¿å…å³¶ / â—‹â—‹FC / å¤§é˜ª ãªã©">
          <a class="btn btn-yellow" href="lp.html?pref=ã‚¨ãƒªã‚¢å¤–&base=ã‚¨ãƒªã‚¢å¤–&sales=" target="_blank">â• ã‚¨ãƒªã‚¢å¤–LP</a>
          <a class="btn btn-yellow" href="lp.html?pref=æœ¬éƒ¨å–¶æ¥­&base=æœ¬éƒ¨å–¶æ¥­&sales=" target="_blank">â• æœ¬éƒ¨å–¶æ¥­LP</a>
        </div>
      </div>

      <div class="row cols2">
        <div class="card">
          <h2 style="margin:0 0 10px;font-size:15px;font-weight:900">å…¨å›½ãƒãƒƒãƒ—é¢¨ï¼ˆåœ°åŸŸãƒ–ãƒ­ãƒƒã‚¯ï¼‰</h2>
          <div class="gridMap" id="map"></div>
        </div>
        <div class="card">
          <h2 style="margin:0 0 10px;font-size:15px;font-weight:900">æ¤œç´¢çµæœ</h2>
          <div class="chips" id="result"></div>
          <div class="muted" style="margin-top:10px">
            ğŸ”§ æ‹ ç‚¹ã‚’å¢—ã‚„ã™ãªã‚‰ï¼š<code>BASES</code> ã«è¿½åŠ  â†’ è‡ªå‹•åæ˜ 
          </div>
        </div>
      </div>
    </div>

    <!-- ===== æ‹ ç‚¹LPãƒ¢ãƒ¼ãƒ‰ ===== -->
    <div id="modeLP" style="display:none">
      <div class="row cols2">
        <div class="card">
          <div class="pill">éƒ½é“åºœçœŒï¼š<b id="prefLabel">â€”</b></div>
          <div class="pill">æ‹ ç‚¹åï¼š<b id="baseLabel">â€”</b></div>
          <div class="pill">æ‹…å½“å–¶æ¥­ï¼š<b id="salesLabel">â€”</b></div>

          <div style="margin-top:12px;display:flex;gap:8px;flex-wrap:wrap">
            <a class="btn btn-yellow" id="openForm" href="#" target="_blank">ğŸ“ æœˆæ¬¡å…¥åŠ›ã‚’é–‹ã</a>
            <a class="btn btn-blue" id="openViewer" href="#" target="_blank">ğŸ“Š æœ¬éƒ¨ç¢ºèªï¼ˆviewerï¼‰</a>
            <a class="btn btn-green" href="https://lin.ee/o1TPv8v" target="_blank">ğŸ“© LINEï¼ˆæœˆæ¬¡å ±å‘Šï¼‰</a>
            <a class="btn" href="lp.html">â¬…ï¸ æ‹ ç‚¹ä¸€è¦§ã¸æˆ»ã‚‹</a>
          </div>

          <div class="muted" style="margin-top:12px">
            <b>æ‰‹é †</b><br>
            â‘ ã€Œæœˆæ¬¡å…¥åŠ›ã‚’é–‹ãã€â†’ æ‹ ç‚¹æƒ…å ±ãŒè‡ªå‹•ã§å…¥ã£ãŸçŠ¶æ…‹ã§å…¥åŠ›<br>
            â‘¡ PDF/CSVã‚’å‡ºåŠ›<br>
            â‘¢ LINEã€Œæœˆæ¬¡å ±å‘Šã€ã«æ·»ä»˜ã—ã¦é€ä¿¡
          </div>
        </div>

        <div class="card">
          <h2 style="margin:0 0 10px;font-size:15px;font-weight:900">ã“ã®æ‹ ç‚¹LPã®QR</h2>
          <div class="qrWrap">
            <div id="qrcode"></div>
          </div>
          <div class="muted" style="margin-top:10px">URLï¼š<code id="urlText"></code></div>
        </div>
      </div>
    </div>

  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
  <script>
    // ===== æ‹ ç‚¹ãƒªã‚¹ãƒˆï¼ˆã“ã“ã ã‘ç·¨é›†ã—ã¦å¢—ã‚„ã™ï¼‰=====
    // region: åœ°åŸŸ / pref: éƒ½é“åºœçœŒ / base: æ‹ ç‚¹å / sales: æ‹…å½“å–¶æ¥­ï¼ˆä»»æ„ï¼‰
    const BASES = [
      {region:"ä¹å·ãƒ»æ²–ç¸„", pref:"é¹¿å…å³¶çœŒ", base:"OFAé¹¿å…å³¶", sales:""},
      {region:"ä¹å·ãƒ»æ²–ç¸„", pref:"ç¦å²¡çœŒ", base:"OFAç¦å²¡å—", sales:"æ£®ä¸‹"},
      {region:"ä¹å·ãƒ»æ²–ç¸„", pref:"ç†Šæœ¬çœŒ", base:"OFAç†Šæœ¬", sales:""},
      // {region:"é–¢è¥¿", pref:"å¤§é˜ªåºœ", base:"OFAå¤§é˜ª", sales:""},
      // {region:"é–¢æ±", pref:"æ±äº¬éƒ½", base:"OFAæ±äº¬", sales:""},
    ];
    const REGIONS = ["åŒ—æµ·é“","æ±åŒ—","é–¢æ±","ä¸­éƒ¨","é–¢è¥¿","ä¸­å›½","å››å›½","ä¹å·ãƒ»æ²–ç¸„"];

    const qs = new URLSearchParams(location.search);
    const pref = qs.get("pref");
    const base = qs.get("base");
    const sales = qs.get("sales") || "";

    const headerTitle = document.getElementById("headerTitle");
    const headerSub = document.getElementById("headerSub");
    const modeList = document.getElementById("modeList");
    const modeLP = document.getElementById("modeLP");

    function lpUrl(x){
      return `lp.html?pref=${encodeURIComponent(x.pref)}&base=${encodeURIComponent(x.base)}&sales=${encodeURIComponent(x.sales||"")}`;
    }

    // ===== æ‹ ç‚¹LPãƒ¢ãƒ¼ãƒ‰åˆ¤å®š =====
    if(pref && base){
      modeList.style.display="none";
      modeLP.style.display="block";

      headerTitle.textContent = `æ‹ ç‚¹LPï¼ˆQRå…¥å£ï¼‰`;
      headerSub.textContent = `ã“ã®ãƒšãƒ¼ã‚¸ã‚’QRåŒ–ã—ã¦æ‹ ç‚¹ã¸é…å¸ƒ`;

      document.getElementById("prefLabel").textContent = pref;
      document.getElementById("baseLabel").textContent = base;
      document.getElementById("salesLabel").textContent = sales || "ï¼ˆä»»æ„ï¼‰";

      const formUrl = `index.html?pref=${encodeURIComponent(pref)}&base=${encodeURIComponent(base)}&sales=${encodeURIComponent(sales)}&role=${encodeURIComponent("ã‚¨ãƒªã‚¢ãƒãƒ")}`;
      document.getElementById("openForm").href = formUrl;

      const viewerUrl = `viewer.html?pref=${encodeURIComponent(pref)}&base=${encodeURIComponent(base)}`;
      document.getElementById("openViewer").href = viewerUrl;

      const full = location.href;
      document.getElementById("urlText").textContent = full;

      // QRç”Ÿæˆï¼ˆå†ç”Ÿæˆé˜²æ­¢ï¼‰
      const qEl = document.getElementById("qrcode");
      qEl.innerHTML = "";
      new QRCode(qEl, { text: full, width: 220, height: 220 });

    } else {
      // ===== ä¸€è¦§ãƒ¢ãƒ¼ãƒ‰ =====
      headerTitle.textContent = "æ‹ ç‚¹ä¸€è¦§ï¼ˆå…¨å›½ãƒãƒƒãƒ—é¢¨ï¼‰";
      headerSub.textContent = "æ‹ ç‚¹LPï¼ˆQRå…¥å£ï¼‰ã‚’ä½œã£ã¦ã€æœˆæ¬¡å…¥åŠ›ã¸èª˜å°";

      const mapEl = document.getElementById("map");
      const resEl = document.getElementById("result");
      const qEl = document.getElementById("q");

      function renderMap(){
        mapEl.innerHTML = "";
        REGIONS.forEach(r=>{
          const box = document.createElement("div");
          box.className = "region";
          const items = BASES.filter(b=>b.region===r);
          box.innerHTML = `<h2>${r}ï¼ˆ${items.length}ï¼‰</h2><div class="chips"></div>`;
          const chips = box.querySelector(".chips");
          items.forEach(b=>{
            const a = document.createElement("a");
            a.className = "chip";
            a.href = lpUrl(b);
            a.textContent = `${b.base}ï¼ˆ${b.pref}ï¼‰`;
            chips.appendChild(a);
          });
          mapEl.appendChild(box);
        });
      }

      function renderSearch(){
        const q = (qEl.value||"").trim();
        const list = !q ? BASES : BASES.filter(b=>{
          const s = `${b.region} ${b.pref} ${b.base} ${b.sales||""}`;
          return s.indexOf(q) !== -1;
        });
        resEl.innerHTML = "";
        list.forEach(b=>{
          const a = document.createElement("a");
          a.className = "chip";
          a.href = lpUrl(b);
          a.textContent = `${b.base}ï¼ˆ${b.pref}ï¼‰`;
          resEl.appendChild(a);
        });
      }

      qEl.addEventListener("input", renderSearch);
      renderMap();
      renderSearch();
    }
  </script>
</body>
</html>
